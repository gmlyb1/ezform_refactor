<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ezform.mapper.inq_Mapper">

	<select id="selectInquiryList" parameterType="EZ_inqVO" resultType="EZ_inqVO">
		 SELECT
	          @rownum := @rownum + 1 AS rowNo
	        , inq_no
	        , inq_title
	        , inq_content
	        , inq_name
	        , inq_dname
	        , em_email
	        , inq_file
	        , inq_check
	        , inq_regdate
	    FROM ez_inq
	    JOIN (SELECT @rownum := 0) r
    	WHERE em_email = #{em_email}
	</select>
	
	<select id="selectInquiryAdminList" parameterType="EZ_inqVO" resultType="EZ_inqVO">
		 SELECT
	          @rownum := @rownum + 1 AS rowNo
	        , inq_no
	        , inq_title
	        , inq_content
	        , inq_name
	        , inq_dname
	        , em_email
	        , inq_file
	        , inq_check
	        , inq_regdate
	    FROM ez_inq
	    JOIN (SELECT @rownum := 0) r
	</select>
	
	<insert id="insertInquiry">
		insert into ez_inq 
			(
			 inq_no
			,inq_title
			,inq_content
			,inq_name
			,inq_dname
			,em_email
			,inq_file
			,inq_check
			,inq_regdate
			)
		values
			(
			 #{inq_no}
			,#{inq_title}
			,#{inq_content}
			,#{inq_name}
			,#{inq_dname}
			,#{em_email}
			,#{inq_file}
			,#{inq_check}
			,NOW()
			)
	</insert>
	
	<select id="read" resultType="EZ_inqVO">
		select 
			 inq_no
			,inq_title
			,inq_content
			,inq_name
			,inq_dname
			,em_email
			,inq_file
			,inq_check
			,inq_regdate
		from ez_inq
		where inq_no = #{inq_no}
	</select>
	
	<select id="unCheckInquiryList" parameterType="EZ_inqVO" resultType="EZ_inqVO">
		select 
			 inq_no
			,inq_title
			,inq_content
			,inq_name
			,inq_dname
			,em_email
			,inq_file
			,inq_check
			,inq_regdate
		from ez_inq
		where em_email = #{em_email}
		and inq_check = 0
	</select>
	
	<update id="modify">
		update ez_inq set
			 inq_title = #{inq_title}
			,inq_content = #{inq_content}
			,inq_file = #{inq_file}
			,inq_regdate = NOW()
		where inq_no = #{inq_no}
	</update>
	
	<update id="updateCheck">
		update ez_inq set 
			inq_check = 1
		where inq_no = #{inq_no}
	</update>	
	
	<delete id="remove">
		delete from ez_inq 
		where inq_no = #{inq_no}
	</delete>

	
</mapper>
